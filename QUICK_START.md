# TaskifAI Quick Start Guide

Fast track to local development with Docker.

## Prerequisites

- Docker Desktop installed and running
- Git configured

## First Time Setup

```bash
# 1. Clone repository (if not already done)
git clone <your-repo-url>
cd TaskifAI_platform_v2.0

# 2. Start everything with one command (MUST run from project root)
./scripts/dev-start.sh
```

**Important**: All scripts MUST be run from the project root directory (`TaskifAI_platform_v2.0/`), not from the `scripts/` directory.

That's it! The script will:
- Check Docker is running
- Create `.env` files automatically
- Start all services (Database, Redis, Backend API, Frontend, Worker)
- Wait for services to be healthy
- Show you access URLs

## Access Your Local Environment

After starting, open these URLs:

- **Frontend**: http://localhost:5173
- **Backend API**: http://localhost:8000
- **API Docs**: http://localhost:8000/docs (interactive Swagger UI)

## Development Workflow

### The Modern Way (What You Should Do)

```bash
# 1. Start local environment
./scripts/dev-start.sh

# 2. Make your code changes in your editor
#    - Backend: backend/app/**/*.py
#    - Frontend: frontend/src/**/*.tsx

# 3. Test locally (backend auto-reloads, frontend hot-reloads)
#    Just save your file and refresh browser

# 4. Run tests before committing
./scripts/dev-test.sh

# 5. Commit and push when working
git add .
git commit -m "Your changes"
git push

# 6. GitHub Actions will test and deploy automatically
```

**Time savings**: 5 minutes per iteration vs 14-18 minutes deploying to production

### The Old Way (Don't Do This)

```bash
# ❌ Make change → commit → push → wait 14-18 min for deploy → test on production
# This is slow and risky!
```

## Helper Scripts

All scripts are in `scripts/` directory:

### Start/Stop
```bash
./scripts/dev-start.sh          # Start all services
./scripts/dev-stop.sh           # Stop services (keeps data)
./scripts/dev-stop.sh --clean   # Stop and delete all data
./scripts/dev-restart.sh        # Restart all services
./scripts/dev-restart.sh backend # Restart just backend
```

### Monitoring
```bash
./scripts/dev-logs.sh           # View all logs
./scripts/dev-logs.sh backend   # View backend logs only
./scripts/dev-logs.sh frontend  # View frontend logs only
```

### Testing
```bash
./scripts/dev-test.sh           # Run all tests
./scripts/dev-test.sh backend   # Backend tests only
./scripts/dev-test.sh frontend  # Frontend tests only
```

### Database
```bash
./scripts/dev-reset.sh          # Reset database (will ask for confirmation)
./scripts/dev-reset.sh --force  # Reset without confirmation
```

## Common Tasks

### View Logs When Debugging
```bash
# Follow backend logs in real-time
./scripts/dev-logs.sh backend

# Follow frontend logs
./scripts/dev-logs.sh frontend
```

### Restart After Code Changes (Backend)
```bash
# Backend has auto-reload, but if stuck:
./scripts/dev-restart.sh backend
```

### Reset Database for Clean Slate
```bash
# WARNING: Deletes all data
./scripts/dev-reset.sh
```

### Run Tests Before Committing
```bash
# Always run tests before git push
./scripts/dev-test.sh
```

## Environment Variables

The dev-start.sh script creates these automatically:

**Backend** (`backend/.env`):
```bash
SECRET_KEY=<auto-generated>
DATABASE_URL=postgresql://taskifai:taskifai_dev_password@db:5432/taskifai
REDIS_URL=redis://redis:6379/0
ENVIRONMENT=development
DEBUG=true
```

**Frontend** (`frontend/.env`):
```bash
VITE_API_URL=http://localhost:8000
VITE_ENVIRONMENT=development
```

To add API keys, edit these files manually:
```bash
# backend/.env
OPENAI_API_KEY=your_key_here
SENDGRID_API_KEY=your_key_here
```

## Troubleshooting

### Services won't start
```bash
# Check Docker is running
docker info

# View what went wrong
./scripts/dev-logs.sh

# Try clean restart
./scripts/dev-stop.sh --clean
./scripts/dev-start.sh
```

### Database connection errors
```bash
# Reset database
./scripts/dev-reset.sh

# Restart backend
./scripts/dev-restart.sh backend
```

### Port already in use
```bash
# Stop all containers
./scripts/dev-stop.sh

# Check what's using the port (example: port 5173)
lsof -i :5173

# Kill the process if needed
kill -9 <PID>
```

### Changes not reflecting
```bash
# Frontend: Hard refresh browser (Ctrl+Shift+R)
# Backend: Check logs for errors
./scripts/dev-logs.sh backend
```

## Architecture

**Services Running Locally:**
- **PostgreSQL** (port 5432): Database with taskifai schema
- **Redis** (port 6379): Cache and Celery message broker
- **Backend API** (port 8000): FastAPI with auto-reload
- **Frontend** (port 5173): React + Vite with hot-reload
- **Celery Worker**: Background task processor

**Data Persistence:**
- Database data persists between restarts
- Use `./scripts/dev-stop.sh --clean` to wipe everything

## Next Steps

1. **Read Full Docs**: Check `Project_docs/` for detailed architecture
2. **Explore API**: Visit http://localhost:8000/docs for interactive API docs
3. **Run Tests**: Get familiar with test suite in `backend/tests/`
4. **Check CI/CD**: See `.github/workflows/ci-cd.yml` for deployment pipeline

## Pro Tips

- Use `./scripts/dev-logs.sh backend` in one terminal while coding
- Run `./scripts/dev-test.sh` before every git push
- Keep `./scripts/dev-reset.sh` handy when database gets messy
- Frontend changes hot-reload - just save and see results
- Backend changes auto-reload - watch logs to confirm

---

**Questions?** Check `CLAUDE.md` or full documentation in `Project_docs/`
